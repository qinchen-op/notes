***

# 数据库得基本知识

***什么是数据库？***

>保存数据得仓库。它体现在我们电脑中就是一个软件或者文件系统。然后把数据保存在这些特殊的文件中，并且需要使用固定的语言（*SQL语句/语言*）去操作文件中的数据。


***数据库的优点***

>数据库时按照特定的格式将数据存储在文件中，通过`SQL`语句可以方便地对大量数据进行增、删、改、查操作，数据库是对大量的信息进行管理的高效的解决方案。


***常见的数据库***

	我们开发应用程序的时候，程序中的所有数据，最后都需要保存到专业软件中。这些专业的保存数据的软件我们称为数据库。我们学习数据库，并不是学习如何去开发一个数据库软件，我们学习的是如何使用数据库以及数据库中的数据记录的操作。而数据库软件是由第三方公司研发。

**Oracle**：它是Oracle公司的大型关系型数据库。系统可移植性好、使用方便、功能强，适用于各类大、中、小、微机环境。它是一种高效率、安全可靠的。但是它是收费的。 
**MYSQL**：早期由瑞典一个叫MySQL AB公司开发的，后期被sun公司收购，再后期被Oracle收购。体积小、速度快、总体拥有成本低，尤其是[开放源码](https://baike.baidu.com/item/%E5%BC%80%E6%94%BE%E6%BA%90%E7%A0%81)这一特点，一般中小型网站的开发都选择 MySQL 作为网站数据库。
**DB2** ：IBM公司的数据库产品,收费的。常应用在银行系统中. 
**SQLServer**：MicroSoft 公司收费的中型的数据库。C#、.net等语言常使用。
**SyBase**：Sybase公司的。 已经淡出历史舞台。提供了一个非常专业数据建模的工具PowerDesigner。

**常用数据库**：Java开发应用程序主要使用的数据库`MySQL（5.6）`、`Oracle`、`DB2`。 在`web`应用中，使用的最多的就是`MySQL`数据库，原因如下：

1. 开源、免费
    
2. 功能足够强大，足以应付`web`应用开发（最高支持千万级别的并发访问）


# 关系型数据库

	在开发软件的时候，软件中的数据之间必然会有一定的关系存在。比如商品和客户之间的关系，一个客户是可以买多种商品，而一种商品是可以被多个客户来购买的。

	需要把这些数据保存在数据库中，同时也要维护数据之间的关系，这时就可以直接使用上述的那些数据库。而上述的所有数据库都属于关系型数据库。


***关系型数据库***

- 设计数据库的时候需要使用`E-R`实体关系图来描述。

	`E-R`是两个单词的首字母，`E`表示`Entity`实体，`R`表示`Relationship`关系。
	
	实体：可以理解成我们`Java`程序中的一个对象。

	关系：实体和实体之间的关系：在`E-R`图中使用菱形表示。


说明：

1、一个数据库软件可以安装多个数据仓库，数据仓库可以简称为数据库，在数据库中创建数据表来保存数据。

2、数据库的一行称为记录，可以理解成java实例化后的一个对象。

3、数据库的一列称为字段，理解成java类中的属性。

4、一个数据仓库中是可以有多张表的。

未来关于数据库我们学习的目标：

1）对数据库进行增删改查(`CRUD`);(主要对整个数据库进行操作，比如删除一个数据库和增加一个数据库)。`create`(增) `read`(查) `update`(改) `delete`(删)

2）对数据表结构进行增删改查(`CRUD`);(主要对整张表，比如删除一张表和增加一张表)。

3）对表中的数据进行增删改查(`CRUD`);(主要对表中的具体数据，比如删除一个表中的一行记录和增加一行数据)。

注意：关于对数据库表的操作，查询是开发中最难的，也是最重要的；


***小结***

>一个数据库软件，可以管理多个数据仓库（数据库）。

>一个数据仓库可以管理多张数据表。

>每个数据表中可以存储多行数据记录。

	提示：每创建一个数据仓库，会在mysql的数据文件目录(data)中多一个文件夹。



# `SQL`语句的分类和语法

### 什么是`SQL`？

`Structured Query Language`结构化查询语言。`SQL`语句不依赖与任何平台，对所有的数据库是通用的。学会了`SQL`语句的使用，可以在任何的数据库使用,但都有特有内容。`SQL`语句功能强大、简单易学、使用方便。

>	`SQL`语句是一个非过程性的语言，每一条`SQL`执行完都有一个具体的结果出现。多条语句之间没有影响。

>	`SQL`语句主要用来操作数据库、数据表以及数据表中的数据。


### `SQL`语句的分类

`SQL`是用来存取关系数据库的语言，具有定义、操纵、控制和查询关系型数据库的四方面功能。所以针对四方面功能，我们将`SQL`进行了分类。

- `DDL(Data Definition Language)`数据定义语言

	用来定义数据库对象：数据库，表，列等。关键字：`create drop alter truncate`(清空数据记录) `show`等

- `DML(Data Manipulation Language)`数据操作语言

	在数据库表中更新，增加和删除记录。如 `update`(更新)， `insert`(插入)， `delete`(删除) 不包含查询。

- `DQL(Data Query Language)`数据库查询语言

	数据表记录的查询。关键字`select`。

- `DCL(Data Control Language)`数据控制语言

	是用来设置或更改数据库用户或者角色权限的语句。



### `SQL`通用语法

1. `SQL`语句可以单行或多行书写，以分号结尾。
    
2. 可使用空格和缩进来增强语句的可读性。
    
3. `MySQL`数据库的SQL语句不区分大小写，关键字开发中一般大写。
    
```mysql
SELECT * FROM student;
```


4. 3种注释 单行注释: -- 注释内容 多行注释: /* 注释 */
    
    **#** 注释内容(mysql特有的单行注释)





# `DDL`

*创建数据库*

1. 直接创建数据库
    
```mysql
CREATE DATABASE 数据库名;
```
    
2. 判断是否存在并创建数据库
```mysql
CREATE DATABASE IF NOT EXISTS 数据库名;
```

3. 创建数据库并指定字符集(编码表)
```mysql
CREATE DATABASE 数据库名 character set 字符集;  
#说明：字符集就是编码表名。在mysql中utf8 latin1 
```


*修改和删除数据库*

1. 修改数据库字符集

```mysql
ALTER 表示修改
ALTER DATABASE 数据库名 default character set 新的字符集;
```

2. 删除数据库

```mysql
drop Database 数据库名;
```

*使用数据库*

1. 查看正在使用的数据库

```mysql
select database();
```

2. 使用/切换数据库

```mysql
use 数据库名;
```


*创建表*

>前提是已经使用了某个数据库。

1. 创建数据表

```mysql
create table 表名(
	字段名1 字段类型,
	字段名2 字段类型,
	字段名3 字段类型
);
```

2. 字段类型

	整数：

	- `tinyint`，微整型，一个字节
	- `smallint`，小整形，2个字节
	- `mediumint`,中整型，3个字节
	- `int`，整型，4个字节
	- `bigint`，大整形，8个字节

	小数：

	- `float`：单精度浮点数，4个字节
	- `double`：双精度浮点数，8个字节
	- `decimal(m,n)`，数值类型，m表示数值的长度，n表示小数的位数，既可以表示整数又可以表示小数。

	日期：

	- `time`：时间类型，`HH:MM:SS`
	- `date`：日期类型，`YYYY-MM-DD`
	- `datetime`：表示日期与时间
	- `timestamp`：表示日期与时间范围

	字符串：

	- `char(m)`：固定长度的字符串
	- `varchar(m)`：小于m的可变长度字符串


*查看表*

1. 查看某个数据库中的所有表

```mysql
show tables;
```

2. 查看表结构

```mysql
desc 表名;
```

3. 查看创建表的`SQL`语句

```mysql
show create table 表名;
```

*创建一个与另一个表结构相同的表*

```mysql
create table 表名 like 其他表；
```

*删除表*

```mysql
drop table if exists 表名;
```


*修改表结构*

1. 添加表列
```mysql
alter table 表名 add 字段名 类型;
```

2. 修改列类型
```mysql
alter table 表名 modify 字段名 新的类型;
```

3. 修改列名
```mysql
alter table 表名 change 旧字段名 新字段名 类型;
```

4. 删除列
```mysql
alter table 表名 drop 字段名;
```


*修改表名*

```mysql
rename table 旧表名 to 新表名;
```

*修改字符集*

```mysql
alter table 表名 character set 字符集;
```





# `DML`


#### 插入记录

*插入全部字段*

- 所有的字段名都写出来
```mysql
INSERT -- 表示往表里插入记录
INSERT INTO 表名 (字段名1, 字段名2...) VALUES (字段值1, 字段值2...);
```

- 不写字段名
```mysql
INSERT INTO 表名 VALUES (字段值1, 字段值2...);
```


*插入部分数据*
```mysql
INSERT INTO 表名 (字段名1, 字段名2...) VALUES (字段值1, 字段值2...);
```

>说明：插入部分数据的时候，要求字段名一定要写出。


*批量插入数据*
```mysql
INSERT INTO 表名 values(字段值1, 字段值2...),(字段值1, 字段值2...),(字段值1, 字段值2...);
```

>没有添加数据的字段要求在相应位置上写`NULL`

```mysql
INSERT INTO 表名 – 表示往哪张表中添加数据
(字段名1, 字段名2, …)  --  要给哪些字段设置值
VALUES (值1, 值2, …); -- 设置具体的值
注意：使用   select * from 表名 --查看该表的所有信息。
```



#### 更新表记录

1. 不带条件修改数据（修改所有数据）
```mysql
UPDATE 表名 SET 字段名=新的值,字段名=新的值,..;
```

2. 带条件修改所有值
```mysql
UPDATE 表名 SET 字段名=新的值,字段名=新的值,.. WHERE 条件;
```

3.关键字说明
```mysql
UPDATE: 表示修改记录 
SET: 要改哪个字段
WHERE: 设置条件
```




#### 删除表记录

1. 不带条件删除数据（删除整张表的数据，但自动增长的id不归0）
```mysql
DELETE -- 删除记录
DELETE FROM 表名;
#表还在，可以操作，只是删除数据。
```

2. 带条件删除数据
```mysql
DELETE FROM 表名 WHERE 条件;
```

3. `truncate`删除表记录 属于`DDL`（相当于删除了整张表又重新创建）
```mysql
TRUNCATE TABLE 表名;
```




# `DQL`


### 基础查询
1. 查询表中的所有列数据
```mysql
SELECT -- 表示查询
SELECT 字段名1, 字段名2, ... FROM 表名;
```


2. 查询表中指定列数据
```mysql
SELECT 字段名1, 字段名2 FROM 表名;
```
>查询指定列的数据时多个列之间以逗号分割。


3. 别名查询
```mysql
SELECT 字段名1 AS 别名, 字段名2 AS 别名... FROM 表名 AS 表别名;
```

>查询给表取别名目前还看不到效果，需要到多表查询的时候才能体现出好处 ；
>AS关键字可以省略。


4. 清楚重复值
```mysql
SELECT DISTINCT 字段名,字段名,.. FROM 表名;
```


5. 查询结果参与运算

 某列数据与固定值运算
```mysql
SELECT 列名1 + 固定值 FROM 表名;
```

某列数据和其他列数据参与运算
```mysql
SELECT 列名1 + 列名2 FROM 表名;
```

>注意：参与运算必须是数值类型。



### 查询进阶

1. 条件查询
```mysql
SELECT 字段名... FROM 表名 WHERE 条件;
```

>流程：取出表中的每条数据，满足条件的记录返回，不满足的就不返回。


